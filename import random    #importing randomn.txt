import random    #importing randomness
import os
            #importing os


# -----------------------------
# GAME DATA
# -----------------------------


suspects = ["Assistant", "Waiter","Watchman","Cousin"]
killer = "Waiter"
accomplice="Cousin"


evidence_data = {
    "The window's glass has been broken by the bullets": {"suspect": "Watchman", "weight": 3},
    "an id_number can be of a hotel staff": {"suspect": "Waiter", "weight": 2},
    "she said,No unknown person was checked in": {"suspect": "Cousin", "weight": 2},
   "He maybe killed and running to escape": {"suspect": "Waiter", "weight": 1},
   "Assistant was out during crime scene or?" :{"suspect":"Assistant", "weight":1},
   "He served meal and went":{"suspect": "Waiter", "weight":2},
   "Watchman heard the shooting noise":{"suspect":"Waiter","weight":1},
   "Daniel last call was to  his cousin related to some business conflict":{"suspect":"Cousin","weight":2},
    "Dinning area got empty at 12:PM":{"suspect":"Waiter","weight":1},
    "chef':-As you know the dining area was full and I was busy in kitchen,because today all the guest ate in restauarnt itself":{"suspect": "Waiter", "weight":1}




}


collected_clues = []
score = {"Assistant": 0, "Waiter": 0,"Watchman":0,"Cousin":0}

case_closed = False
innocent_people = ["Chef", "Receptionist", "Watchman",]
Detective=""
# -----------------------------
# FILE HANDLING FUNCTION
# -----------------------------

def save_case_report(Detective, killer,  accomplice, innocents, evidences):
    with open("case_report.txt", "w") as file:
        file.write("====== CRIME CASE REPORT ======\n\n")
        file.write(f"Detective Name : {Detective}\n")
        file.write(f"Main Killer    : {killer}\n")
        file.write(f"Directed By   : { accomplice}\n\n")

        file.write("Innocent People:\n")
        for person in innocents:
            file.write(f"- {person}\n")

        file.write("\nCollected Evidences:\n")
        for clue in evidences:
            file.write(f"- {clue}\n")

        file.write("\n====== CASE CLOSED ======\n")




# -----------------------------
# FUNCTIONS
# -----------------------------
def clear():
    os.system("cls") #windows
   
def next_page():
    input("\nPress Enter to go at crime scene and investigate  ....")
    clear()




def intro():
    global Detective
    print("\nğŸ•µï¸ ADAPTIVE CRIME INVESTIGATION SIMULATOR ğŸ•µï¸")
    print("""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     CRIME INVESTIGATION      â•‘
â•‘        CASE FILE #404        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•""")
    print("""
ABOUT THE CASE


A murder has occurred at Blue-Pearl Hotel, a well-known posh area near LA.


The victim, Mr. Daniel Josh, was an investment banker staying on the 16th floor
with his assistant. He had come to the city to attend a business summit and was
about to leave for his homeland the next day.


On the same night, Mr. Daniel Josh's body was found in his room.
He was shot dead.
""")






    print("Analyze evidence carefully. The killer is not fixed.\n")
    Detective=input("Allotted Detective name=")
    print("\n The allotted detective for the case #404 is",Detective)
    next_page()
   
    print("Investigation begins !")




def Check_Window():
    clue ="The window's glass has been broken by the bullets"
    if clue not in collected_clues:
        print("\nğŸ” Found: The window was broken by the bullets")
        collect_clue(clue)
    else:
        print("\nYou already checked the window")




def Search_Room():
    clue ="an id_number can be of a hotel staff"
    if clue not in collected_clues:
        print("\nğŸ” Found:Found an id_number ")
        collect_clue(clue)
    else:
        print("\nYou already Searched the Room")


def talk_to_Receptionist():
    clue="she said,No unknown person was checked in"
    if clue not in collected_clues:
        print("\n Receptionist")
        print("\n statement:- No unknown person was checked in that night.")
        collect_clue(clue)
    else:
        print("\n Receptionist")
        print("I've already told you everything, detective")


def search_corridor():
    clue="He maybe killed and running to escape"
    if clue not in collected_clues:
        print("\nğŸ” Found: Someone was running in corridor in staff wear")
        collect_clue(clue)
    else:
        print("\nYou already saw someone running ")


def search_hotel_resturant():
    clue="Dinning area got empty at 12:PM"
    if clue not in collected_clues:
        print("\n Dinning area was full at that night and got free at 12:PM midnight")
        collect_clue(clue)
    else:
        print("You have already Checked the dinning area")


def interrogate():
    print("\nğŸ‘¥ Interrogation")
    print("1. Assistant")
    print("2. Waiter")
    print("3. Watchman")
    print("4. Chef")
    print("5.Cousin")


    choice = input("Choose suspect (1/5): ")


    if choice == "1":
        print("\nAssistant:- 'I went to office to bring some confidential file'")
        collect_clue("Assistant was out during crime scene or?")
    elif choice == "2":
        print("\nWaiter: 'I served the meal to sir and went back'")
        collect_clue("He served meal and went")
    elif choice == "3":
        print("\nWatchman:- I heard shooting noise from the apartment and immediately ran to see")
        collect_clue("Watchman heard the shooting noise")
    elif choice == "4":
        print("\n  chef:-As you know the dining area was full and I was busy in kitchen,because today all the guest ate in restauarnt itself")
    elif choice == "5":
        print("\n Cousin:- Yes, Daniel last call was to me we talked about some business conflict and hang up")
        collect_clue("Daniel last call was to  his cousin related to some business conflict")
    else:
        print("Invalid choice.")




def collect_clue(clue):
    if clue not in collected_clues:
        collected_clues.append(clue)
        suspect = evidence_data[clue]["suspect"]
        score[suspect] += evidence_data[clue]["weight"]
        print(f"ğŸ“Œ Clue recorded: {clue}")




def show_evidence():
    print("\nğŸ§¾ Collected Evidence:")
    for clue in collected_clues:
        print("-", clue)




def final_accusation():
    global case_closed


    print("\nâš–ï¸ FINAL ACCUSATION")
    print("1. Assitant")
    print("2. Waiter")
    print("3. Watchman ")
    print("4. Cousin")


    choice = input("Who is the killer? (1/4): ")


    accused = suspects[int(choice) - 1]
    strongest_suspect = max(score, key=score.get)


    print("\nğŸ§  Deduction Analysis:")
    print(score)


    if accused == killer:
        print("\nğŸ‰ PERFECT DEDUCTION! You solved the case brilliantly.")
        print(" Killer:", killer)
        print(" Accomplice:", accomplice)
        print("Truth: The waiter pulled the trigger, but the cousin planned the crime.")



    elif accused == killer:
        print("\nâœ… Correct killer, but evidence was weak. \n")
        print("\n Killer:", killer)
        print(" \n Accomplice:", accomplice)
        print("Truth: The waiter pulled the trigger, but the cousin planned the crime.")


    else:
        print("\nâŒ Wrong accusation. The real killer escaped.")
        print(" Killer:", killer)
        print(" Accomplice:", accomplice)
        print("Truth: The waiter pulled the trigger, but the cousin planned the crime.")
        
        save_case_report(Detective,killer,accomplice,innocent_people,collected_clues)
        print("\n Case report saved as 'case2_report.txt'")




    case_closed = True




def menu():
    print("\nğŸ“‹ Actions")
    print("1. check_window")
    print("2. search_Room")
    print("3. Search_corridor")
    print("4. Talk_to_Receptionist")
    print("5. Check_the_Dinningarea")
    print("6. Interrogate Suspects")
    print("7. View Evidence")
    print("8. Make Final Accusation")




# -----------------------------
# MAIN PROGRAM
# -----------------------------


intro()


while not case_closed:
    menu()
    option = input("Choose (1-7): ")


    if option == "1":
        Check_Window()
    elif option == "2":
        Search_Room()
    elif option == "3":
        search_corridor()
    elif option == "4":
      talk_to_Receptionist()
    elif option =="5":
      search_hotel_resturant()
    elif option == "6":
        interrogate()
    elif option == "7":
        show_evidence()
    elif option == "8":
         final_accusation()
    else:
        print("Invalid choice.")


print("\nğŸ—‚ï¸ CASE CLOSED.")